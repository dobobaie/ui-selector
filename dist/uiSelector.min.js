var uiSelector=function(e){return(new function(){this.init=function(){return"string"==typeof e?r.elParent=document.querySelector(e):"object"==typeof e&&void 0!=e.el?"string"==typeof e.el?r.elParent=document.querySelector(e.el):"object"==typeof e.el?r.elParent=e.el:r.elParent=e:r.elParent=document.body,r.el=document.createElement("div"),r.el.id="uiSelector",r.el.className="ui-selector",r.el.setAttribute("hidden",!0),r.elParent.appendChild(r.el),r.elParent.addEventListener("mousedown",t),r.elParent.addEventListener("mousemove",s),r.elParent.addEventListener("mouseup",l),document.addEventListener("keydown",n),document.addEventListener("keyup",o),delete r.this.init,{on:r.this.on}},this.on=function(e,t){switch(e){case"selected":r.callback.selected.push(t);break;case"deselect":r.callback.deselect.push(t)}return{on:r.this.on}};var t=function(e){if(1!=r.mouseDown)return r.mouseDown=!0,0==r.keys.shift&&0==r.keys.ctrl&&(r.pos.x.x=e.clientX,r.pos.x.y=e.clientY,r.this.calculPosition(),r.el.removeAttribute("hidden")),r.this.getElements(),r.this.eventClick(e),!0},s=function(e){if(1!=r.mouseDown)return r.pos.y.x=e.clientX,r.pos.y.y=e.clientY,r.this.calculPosition(),r.this.detectElements(),!0},l=function(e){return r.mouseDown=!1,r.el.setAttribute("hidden",!0),!0},n=function(t){var s="object"==typeof e&&"object"==typeof e.keys;return r.keys.ctrl=(1!=s||!1!==e.keys.ctrl)&&t.ctrlKey,r.keys.shift=(1!=s||!1!==e.keys.shift)&&t.shiftKey,!0},o=function(e){return r.keys.ctrl=!1,r.keys.shift=!1,!0};this.calculPosition=function(){r.pos.left=Math.min(r.pos.x.x,r.pos.y.x),r.pos.top=Math.min(r.pos.x.y,r.pos.y.y),r.pos.right=Math.max(r.pos.x.x,r.pos.y.x),r.pos.bottom=Math.max(r.pos.x.y,r.pos.y.y),r.pos.width=r.pos.right-r.pos.left,r.pos.height=r.pos.bottom-r.pos.top,r.el.style.left=r.pos.left+"px",r.el.style.top=r.pos.top+"px",r.el.style.width=r.pos.right-r.pos.left+"px",r.el.style.height=r.pos.bottom-r.pos.top+"px"},this.getElements=function(){var e=Array.prototype.slice.call(document.getElementsByClassName("ui-element"));e=e.concat(Array.prototype.slice.call(document.querySelectorAll("*[ui-element]"))),r.elements=e},this.detectElements=function(){if(void 0!=r.el.hidden&&!0!==r.el.hidden)for(var e in r.elements){var t=r.elements[e].getBoundingClientRect();1==c(t)?-1==r.elements[e].className.indexOf("ui-selected")&&(r.elements[e].classList.add("ui-selected"),a("selected",r.elements[e])):-1!=r.elements[e].className.indexOf("ui-selected")&&(r.elements[e].classList.remove("ui-selected"),a("deselect",r.elements[e]))}},this.eventClick=function(t){for(var s=null,l=0;void 0!=t.path[l]&&(1!=l||"object"!=typeof e||!0!==e.onlyElement);l++)if(void 0!=t.path[l].className&&(-1!=t.path[l].className.indexOf("ui-element")||null!=t.path[l].getAttribute("ui-element"))){s=t.path[l];break}if(0==r.keys.ctrl&&0==r.keys.shift)for(var n in r.elements)-1!=r.elements[n].className.indexOf("ui-selected")&&(r.elements[n].classList.remove("ui-selected"),a("deselect",r.elements[n]));null!=s&&(-1!=s.className.indexOf("ui-selected")?(s.classList.remove("ui-selected"),a("deselect",s)):(s.classList.add("ui-selected"),a("selected",s)),1==r.keys.shift&&i(s),r.lastTarget=s)};var i=function(e){for(var t=r.lastTarget;null!=(t=t.previousSibling)&&t!==e;);var s=null!=t;for(t=null==t?r.lastTarget:t;null!=(t=t.nextSibling)&&(void 0==t.style||(-1==t.className.indexOf("ui-selected")&&(t.classList.add("ui-selected"),a("selected",t)),t!==(1==s?r.lastTarget:e))););},c=function(e){return r.pos.top<=e.bottom&&r.pos.bottom>=e.top&&r.pos.left<=e.right&&r.pos.right>=e.left},a=function(e,t){for(var s in r.callback[e])"function"==typeof r.callback[e][s]&&r.callback[e][s](t)},r={this:this,elParent:null,el:null,elements:[],lastTarget:null,mouseDown:!1,keys:{ctrl:!1,shift:!1},pos:{width:0,height:0,left:0,top:0,right:0,bottom:0,x:{x:0,y:0},y:{y:0,x:0}},callback:{selected:[],deselect:[]}}}).init()};try{module.exports=uiSelector}catch(e){}