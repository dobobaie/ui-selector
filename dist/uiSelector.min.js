var uiSelector=function(e){return(new function(){this.init=function(){return"string"==typeof e?a.elParent=document.querySelector(e):"object"==typeof e&&void 0!=e.el?"string"==typeof e.el?a.elParent=document.querySelector(e.el):"object"==typeof e.el?a.elParent=e.el:a.elParent=e:a.elParent=document.body,a.el=document.createElement("div"),a.el.id="uiSelector",a.el.className="ui-selector",a.el.setAttribute("hidden",!0),a.elParent.appendChild(a.el),a.elParent.addEventListener("mousedown",t),a.elParent.addEventListener("mousemove",s),a.elParent.addEventListener("mouseup",l),document.addEventListener("keydown",o),document.addEventListener("keyup",n),delete a.this.init,{on:a.this.on}},this.on=function(e,t){switch(e){case"selected":a.callback.selected.push(t);break;case"deselect":a.callback.deselect.push(t)}return{on:a.this.on}};var t=function(e){if(1!=a.mouseDown)return a.mouseDown=!0,0==a.keys.shift&&0==a.keys.ctrl&&(a.pos.x.x=e.clientX,a.pos.x.y=e.clientY,a.this.calculPosition(),a.el.removeAttribute("hidden")),a.this.getElements(),a.this.eventClick(e),!0},s=function(e){if(a.mouseMoveTry+=1,1!=a.mouseDown||1!=a.mouseMoveTry)return a.mouseMoveTry=0,a.pos.y.x=e.clientX,a.pos.y.y=e.clientY,a.this.calculPosition(),a.this.detectElements(),!0},l=function(e){return a.mouseDown=!1,a.el.setAttribute("hidden",!0),!0},o=function(t){var s="object"==typeof e&&"object"==typeof e.keys;return a.keys.ctrl=(1!=s||!1!==e.keys.ctrl)&&t.ctrlKey,a.keys.shift=(1!=s||!1!==e.keys.shift)&&t.shiftKey,!0},n=function(e){return a.keys.ctrl=!1,a.keys.shift=!1,!0};this.calculPosition=function(){a.pos.left=Math.min(a.pos.x.x,a.pos.y.x),a.pos.top=Math.min(a.pos.x.y,a.pos.y.y),a.pos.right=Math.max(a.pos.x.x,a.pos.y.x),a.pos.bottom=Math.max(a.pos.x.y,a.pos.y.y),a.pos.width=a.pos.right-a.pos.left,a.pos.height=a.pos.bottom-a.pos.top,a.el.style.left=a.pos.left+"px",a.el.style.top=a.pos.top+"px",a.el.style.width=a.pos.right-a.pos.left+"px",a.el.style.height=a.pos.bottom-a.pos.top+"px"},this.getElements=function(){var e=Array.prototype.slice.call(document.getElementsByClassName("ui-element"));e=e.concat(Array.prototype.slice.call(document.querySelectorAll("*[ui-element]"))),a.elements=e},this.detectElements=function(){if(void 0!=a.el.hidden&&!0!==a.el.hidden)for(var e in a.elements){var t=a.elements[e].getBoundingClientRect();1==c(t)?-1==a.elements[e].className.indexOf("ui-selected")&&(a.elements[e].classList.add("ui-selected"),r("selected",a.elements[e])):-1!=a.elements[e].className.indexOf("ui-selected")&&(a.elements[e].classList.remove("ui-selected"),r("deselect",a.elements[e]))}},this.eventClick=function(t){for(var s=null,l=0;void 0!=t.path[l]&&(1!=l||"object"!=typeof e||!0!==e.onlyElement);l++)if(void 0!=t.path[l].className&&(-1!=t.path[l].className.indexOf("ui-element")||null!=t.path[l].getAttribute("ui-element"))){s=t.path[l];break}if(0==a.keys.ctrl&&0==a.keys.shift)for(var o in a.elements)-1!=a.elements[o].className.indexOf("ui-selected")&&(a.elements[o].classList.remove("ui-selected"),r("deselect",a.elements[o]));null!=s&&(-1!=s.className.indexOf("ui-selected")?(s.classList.remove("ui-selected"),r("deselect",s)):(s.classList.add("ui-selected"),r("selected",s)),1==a.keys.shift&&i(s),a.lastTarget=s)};var i=function(e){for(var t=a.lastTarget;null!=(t=t.previousSibling)&&t!==e;);var s=null!=t;for(t=null==t?a.lastTarget:t;null!=(t=t.nextSibling)&&(void 0==t.style||(-1==t.className.indexOf("ui-selected")&&(t.classList.add("ui-selected"),r("selected",t)),t!==(1==s?a.lastTarget:e))););},c=function(e){return a.pos.top<=e.bottom&&a.pos.bottom>=e.top&&a.pos.left<=e.right&&a.pos.right>=e.left},r=function(e,t){for(var s in a.callback[e])"function"==typeof a.callback[e][s]&&a.callback[e][s](t)},a={this:this,elParent:null,el:null,elements:[],lastTarget:null,mouseDown:!1,mouseMoveTry:0,keys:{ctrl:!1,shift:!1},pos:{width:0,height:0,left:0,top:0,right:0,bottom:0,x:{x:0,y:0},y:{y:0,x:0}},callback:{selected:[],deselect:[]}}}).init()};try{module.exports=uiSelector}catch(e){}